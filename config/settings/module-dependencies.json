{
    "$schema": "../schemas/module-dependencies.schema.json",
    "_comment": "v4.0 - Module dependency configuration for intelligent orchestration",
    "_description": "Defines execution dependencies and parallelization capabilities for maintenance modules",
    "dependencies": {
        "BloatwareRemoval": {
            "DependsOn": [],
            "CanRunInParallel": false,
            "Description": "Remove bloatware first to clean system before other operations",
            "Priority": 1,
            "EstimatedDurationSeconds": 180
        },
        "EssentialApps": {
            "DependsOn": [
                "BloatwareRemoval"
            ],
            "CanRunInParallel": false,
            "Description": "Install essential apps after bloatware removal completes",
            "Priority": 2,
            "EstimatedDurationSeconds": 300
        },
        "SystemOptimization": {
            "DependsOn": [
                "BloatwareRemoval"
            ],
            "CanRunInParallel": true,
            "Description": "Optimize system settings after bloatware cleanup",
            "Priority": 2,
            "EstimatedDurationSeconds": 120
        },
        "TelemetryDisable": {
            "DependsOn": [],
            "CanRunInParallel": true,
            "Description": "Disable telemetry (independent operation)",
            "Priority": 1,
            "EstimatedDurationSeconds": 60
        },
        "SecurityEnhancement": {
            "DependsOn": [],
            "CanRunInParallel": true,
            "Description": "Apply security enhancements (independent operation)",
            "Priority": 1,
            "EstimatedDurationSeconds": 90
        },
        "WindowsUpdates": {
            "DependsOn": [
                "BloatwareRemoval",
                "EssentialApps",
                "SystemOptimization",
                "SecurityEnhancement"
            ],
            "CanRunInParallel": false,
            "Description": "Run Windows updates after all other operations complete",
            "Priority": 3,
            "EstimatedDurationSeconds": 600
        },
        "AppUpgrade": {
            "DependsOn": [
                "EssentialApps"
            ],
            "CanRunInParallel": true,
            "Description": "Upgrade installed applications after essentials are installed",
            "Priority": 3,
            "EstimatedDurationSeconds": 240
        }
    },
    "executionLevels": {
        "_comment": "Calculated automatically by Get-ModuleExecutionOrder",
        "level1": {
            "modules": [
                "BloatwareRemoval",
                "TelemetryDisable",
                "SecurityEnhancement"
            ],
            "canRunInParallel": true,
            "description": "Initial cleanup and security (parallel where possible)"
        },
        "level2": {
            "modules": [
                "EssentialApps",
                "SystemOptimization"
            ],
            "canRunInParallel": true,
            "description": "Install apps and optimize system (parallel)"
        },
        "level3": {
            "modules": [
                "WindowsUpdates",
                "AppUpgrade"
            ],
            "canRunInParallel": false,
            "description": "Final updates (sequential, resource-intensive)"
        }
    },
    "validation": {
        "allowCircularDependencies": false,
        "enforceAvailabilityCheck": true,
        "failOnMissingDependency": true
    }
}