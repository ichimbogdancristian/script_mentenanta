{
  "$schema": "recovery-config-schema.json",
  "version": "3.0.0",
  "description": "Automated Recovery Mechanisms Configuration for Windows Maintenance Automation System v3.0",
  "lastUpdated": "2025-10-18T00:00:00Z",
  
  "systemRestorePoints": {
    "enabled": true,
    "createBeforeOperations": true,
    "automaticCreation": {
      "enabled": true,
      "frequency": "daily",
      "maxPerDay": 3,
      "skipIfRecentExists": true,
      "recentThresholdHours": 4
    },
    "restorePointNaming": {
      "prefix": "WinMaintenance",
      "includeTimestamp": true,
      "includeOperationType": true,
      "maxDescriptionLength": 64
    },
    "retention": {
      "maxRestorePoints": 10,
      "keepDays": 30,
      "cleanupPolicy": "oldest-first",
      "preserveCritical": true
    },
    "verification": {
      "testAfterCreation": true,
      "validateDiskSpace": true,
      "minimumFreeSpaceGB": 5
    }
  },
  
  "configurationBackup": {
    "enabled": true,
    "automaticBackup": {
      "beforeModifications": true,
      "scheduledBackups": true,
      "backupFrequency": "daily",
      "maxBackupsPerDay": 5
    },
    "backupScope": {
      "includeMainConfig": true,
      "includeSecurityConfig": true,
      "includeLoggingConfig": true,
      "includeBloatwareList": true,
      "includeEssentialApps": true,
      "includeCustomConfigs": true
    },
    "backupLocation": {
      "primaryPath": "temp_files/recovery/config_backups",
      "secondaryPath": "temp_files/session-{sessionId}/backups",
      "compressionEnabled": true,
      "encryptionEnabled": false
    },
    "retention": {
      "keepDays": 90,
      "maxBackupFiles": 50,
      "cleanupFrequency": "weekly"
    }
  },
  
  "operationRollback": {
    "enabled": true,
    "supportedOperations": [
      "BloatwareRemoval",
      "EssentialApps",
      "WindowsUpdates",
      "TelemetryDisable",
      "SystemOptimization"
    ],
    "rollbackMethods": {
      "registryChanges": {
        "enabled": true,
        "backupOriginalValues": true,
        "validateBeforeRestore": true
      },
      "serviceChanges": {
        "enabled": true,
        "backupServiceStates": true,
        "restoreStartupTypes": true
      },
      "fileOperations": {
        "enabled": true,
        "createBackupCopies": true,
        "validateChecksums": true
      },
      "applicationInstallation": {
        "enabled": true,
        "trackInstallations": true,
        "supportSilentUninstall": true
      }
    },
    "rollbackPolicies": {
      "timeoutMinutes": 30,
      "retryAttempts": 3,
      "requireConfirmation": false,
      "validateAfterRollback": true,
      "logAllActions": true
    }
  },
  
  "systemStateBackup": {
    "enabled": true,
    "components": {
      "registryKeys": {
        "enabled": true,
        "criticalKeys": [
          "HKLM\\SOFTWARE\\Policies",
          "HKLM\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies",
          "HKLM\\SYSTEM\\CurrentControlSet\\Services",
          "HKCU\\SOFTWARE\\Policies",
          "HKCU\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies"
        ]
      },
      "systemServices": {
        "enabled": true,
        "includeStartupTypes": true,
        "includeServiceStates": true,
        "monitoredServices": [
          "DiagTrack",
          "dmwappushservice",
          "WerSvc",
          "Themes",
          "TabletInputService"
        ]
      },
      "installedPrograms": {
        "enabled": true,
        "includeWin32Apps": true,
        "includeUWPApps": true,
        "includeSystemApps": true
      },
      "windowsFeatures": {
        "enabled": true,
        "includeOptionalFeatures": true,
        "includeCapabilities": true
      }
    },
    "backupLocation": {
      "basePath": "temp_files/recovery/system_state",
      "compressionEnabled": true,
      "encryptionEnabled": false
    }
  },
  
  "recoveryValidation": {
    "enabled": true,
    "validationTests": [
      "SystemBootability",
      "ServiceFunctionality",
      "RegistryIntegrity",
      "ApplicationFunctionality",
      "NetworkConnectivity",
      "SecurityPolicies"
    ],
    "validationTimeout": 300,
    "requireAllTestsPass": false,
    "criticalTestFailureThreshold": 1
  },
  
  "emergencyRecovery": {
    "enabled": true,
    "safeMode": {
      "enabled": true,
      "automaticDetection": true,
      "safeModeRecovery": true
    },
    "lastKnownGood": {
      "enabled": true,
      "trackGoodConfigurations": true,
      "autoRevertOnFailure": false
    },
    "emergencyContacts": {
      "enabled": false,
      "notificationMethods": ["email", "log"],
      "contacts": []
    }
  },
  
  "monitoring": {
    "enabled": true,
    "healthChecks": {
      "frequency": "hourly",
      "systemPerformance": true,
      "diskSpace": true,
      "serviceStatus": true,
      "registryIntegrity": false
    },
    "alerting": {
      "enabled": true,
      "thresholds": {
        "diskSpaceWarningGB": 10,
        "diskSpaceCriticalGB": 5,
        "memoryUsageWarningPercent": 85,
        "memoryUsageCriticalPercent": 95
      }
    }
  },
  
  "reporting": {
    "enabled": true,
    "generateRecoveryReports": true,
    "includePerformanceMetrics": true,
    "reportRetentionDays": 30,
    "exportFormats": ["json", "html"],
    "reportLocation": "temp_files/recovery/reports"
  },
  
  "advanced": {
    "parallelOperations": {
      "enabled": false,
      "maxConcurrentBackups": 2,
      "maxConcurrentRestores": 1
    },
    "performanceOptimization": {
      "lowPriorityOperations": true,
      "pauseDuringHighCPU": true,
      "cpuThresholdPercent": 80
    },
    "debugging": {
      "verboseLogging": false,
      "traceOperations": false,
      "preserveTemporaryFiles": false
    }
  }
}